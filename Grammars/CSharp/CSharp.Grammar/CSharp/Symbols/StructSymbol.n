using Nitra;
using Nitra.Runtime.Binding;
using Nitra.Declarations;

using Nemerle;
using Nemerle.Collections;
using Nemerle.Text;
using Nemerle.Utility;

using System;
using System.Collections.Generic;
using System.Linq;

namespace CSharp.Symbols
{
  [Record]
  public abstract class StructSymbol : GenericTypeSymbol
  {
    public static Create(declaration : GenericType, typeParameters : array[TypeParameterSymbol], parent : NamespaceOrTypeSymbol) : GenericTypeSymbol
    {
      GenericTypeSymbol.Create(TopStructSymbol, NestedStructSymbol, declaration, typeParameters, parent)
    }
  }
  
  [Record]
  public class TopStructSymbol : StructSymbol
  {
    public new Parent : NamespaceSymbol { get { (this : NamespaceOrTypeSymbol).Parent :> NamespaceSymbol } }
    
    public override Kind : string { get { "struct" } }
  }

  [Record]
  public class NestedStructSymbol : StructSymbol
  {
    public new Parent : TypeSymbol { get { (this : NamespaceOrTypeSymbol).Parent :> TypeSymbol } }
    
    public override Kind : string { get { "nested struct" } }
  }
}

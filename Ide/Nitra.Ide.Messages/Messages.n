using System.Threading;
using Nemerle.Collections;
using Nemerle.Text;
using Nemerle.Utility;
using Nemerle.Extensions;
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using Nitra.Ide.Macros;

namespace Nitra.Messages
{
  [NitraMessage]
  public class Message
  {
    public static AssemblyVersionGuid : string = MakeGuidString();
  }
  
  [NitraMessage]
  public class File
  {
    public ProjectGuid: string;
    public Path: string;
    public Content: string
  }

  [NitraMessage]
  public class Reference
  {
    public ProjectGuid: string;
    public Path: string
  }
  
  [NitraMessage]
  public class FileChange
  {
    public Foo: int
  }
  
  [NitraMessage]
  public variant RouterMessage : Message
  {
    | Handsshake { assemblyVersionGuid : string }
    | SolutionOpen { solutionFilePath : string }
    | ProjectOpen { guid: string }
    | FilesOpen { files: list[File] }
    | ReferenceOpen { references: list[Reference] }
    | FileChanged { delta: FileChange }
  }
  
  [NitraMessage]
  public struct NSpan
  {
    public StartPos : int;
    public EndPos   : int
  }
}
using Nitra.ProjectSystem;

using System;

namespace Nitra.Declarations
{
  public interface IAst : ILocated, IDependentPropertyContainer
  {
    IsAmbiguous : bool  { get; }
    IsMissing   : bool  { get; }
    ToXaml() : string;
    Accept(visitor : IAstVisitor) : void;
  }

  public module IAstExtensions
  {
    public DeepResetProperties(this ast : IAst) : void
    {
      DeepResetPropertiesAstVisitor.Instance.Visit(ast)
    }

    public ReportMessage(this ast : IAst, messageType : CompilerMessageType, cond : bool, text : string) : void
    {
      unless (cond)
        ast.File.AstMessages.ReportMessage(messageType, ast.ToLocation(), text, 0)
    }
  }
}

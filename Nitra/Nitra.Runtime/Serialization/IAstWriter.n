using Nemerle;
using Nemerle.Collections;
using Nemerle.Text;
using Nemerle.Utility;

using System;
using System.Collections.Generic;
using System.Linq;

namespace Nitra.Serialization
{
  public interface IAstWriter
  {
    BeginWriteOption(hasValue : bool, isOptimized : bool) : void;
    BeginWriteList(count : int, isOptimized : bool) : void;
    BeginWriteTuple(count : int) : void;
    WriteText(text : string) : void;
    BeginWriteAst(ruleDescriptor : RuleDescriptor) : void;
    WriteMissingAst(ruleDescriptor : RuleDescriptor) : void;
    BeginWriteAmbiguousAst(ruleDescriptor : RuleDescriptor, count : int) : void;
    EndWrite() : void;
  }

  public interface IAstReader
  {
    ReadOptionHeader() : bool;

    ReadListHeader() : int;

    ReadTupleHeader() : int;

    ReadText(text : string) : string;

    ReadAst() : Ast;
  }
}

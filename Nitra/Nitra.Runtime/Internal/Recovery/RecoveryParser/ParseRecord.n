using Nemerle;
using Nemerle.Collections;
using Nemerle.Text;
using Nemerle.Utility;
using Nemerle.Imperative;
using Nemerle.Extensions;

using Nitra.Runtime.Reflection;

using System;
using System.Linq;

using SCG = System.Collections.Generic;

namespace Nitra.Internal.Recovery
{
  [Record, StructuralEquality]
  public struct ParseRecord
  {
    public Sequence : ParsedSequence;
    public Index    : int;

    public IsComplete : bool        { get { Index >= Sequence.SubruleCount } }
    public CurSubrule : SubruleInfo { get { Sequence.GetSubrule(Index) } }

    public Next() : ParseRecord
    {
      assert3(!IsComplete);
      ParseRecord(Sequence, Index + 1);
    }
  }
}

<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Stage>Stage2</Stage>
    <ProjectGuid>{6338A4D5-E02C-4787-AF57-E96BF7342079}</ProjectGuid>
    <Name>DotNetLang.Stage2</Name>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <NemerleVersion>Net-4.0</NemerleVersion>
    <NemerleBinPathRoot Condition=" '$(NemerleBinPathRoot)' == '' ">$(ProgramFiles)\Nemerle</NemerleBinPathRoot>
    <Nemerle Condition=" '$(Nemerle)' == '' ">$(NemerleBinPathRoot)\$(NemerleVersion)</Nemerle>
    <!--CustomArguments>-debugger</CustomArguments-->
  </PropertyGroup>
  <Import Project="..\DotNetLang\DotNetLang.nproj" />
  <Target Name="AfterBuild2">
    <PropertyGroup>
      <ReSharperPluginsPath>$(LOCALAPPDATA)\JetBrains\Installations\ReSharperPlatformVs12Exp</ReSharperPluginsPath>
    </PropertyGroup>
    <ItemGroup>
      <DeployFiles Include="$(TargetDir)\$(TargetName).???" />
      <VsExtensionsConfigurationchanged Condition="Exists('$(VS120COMNTOOLS)')" Include="$(VS120COMNTOOLS)\..\IDE\Extensions\extensions.configurationchanged" />
    </ItemGroup>
    <Message Importance="high" Text="Deploy to $(ReSharperPluginsPath): @(DeployFiles)" Condition="Exists('$(ReSharperPluginsPath)')" />
    <Copy SourceFiles="@(DeployFiles)" DestinationFolder="$(ReSharperPluginsPath)" SkipUnchangedFiles="true" UseHardlinksIfPossible="true" Condition="Exists('$(ReSharperPluginsPath)')" />
    <Message Importance="high" Text="Deploy to $(ReSharperPluginsPath)_000: @(DeployFiles)" Condition="Exists('$(ReSharperPluginsPath)_000')" />
    <Copy SourceFiles="@(DeployFiles)" DestinationFolder="$(ReSharperPluginsPath)_000" SkipUnchangedFiles="true" UseHardlinksIfPossible="true" Condition="Exists('$(ReSharperPluginsPath)_000')" />
    <Message Importance="high" Text="Deploy to $(ReSharperPluginsPath)_001: @(DeployFiles)" Condition="Exists('$(ReSharperPluginsPath)_001')" />
    <Copy SourceFiles="@(DeployFiles)" DestinationFolder="$(ReSharperPluginsPath)_001" SkipUnchangedFiles="true" UseHardlinksIfPossible="true" Condition="Exists('$(ReSharperPluginsPath)_001')" />
    <Touch Files="@(VsExtensionsConfigurationchanged)" ForceTouch="true" AlwaysCreate="true" />
  </Target>
</Project>